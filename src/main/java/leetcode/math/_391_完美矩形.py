# //ç»™ä½ ä¸€ä¸ªæ•°ç»„ rectangles ï¼Œå…¶ä¸­ rectangles[i] = [xi, yi, ai, bi] è¡¨ç¤ºä¸€ä¸ªåæ ‡è½´å¹³è¡Œçš„çŸ©å½¢ã€‚è¿™ä¸ªçŸ©å½¢çš„å·¦ä¸‹é¡¶ç‚¹æ˜¯
# // (xi, yi) ï¼Œå³ä¸Šé¡¶ç‚¹æ˜¯ (ai, bi) ã€‚
# //
# // å¦‚æœæ‰€æœ‰çŸ©å½¢ä¸€èµ·ç²¾ç¡®è¦†ç›–äº†æŸä¸ªçŸ©å½¢åŒºåŸŸï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚
# //
# // ç¤ºä¾‹ 1ï¼š
# //
# //
# //è¾“å…¥ï¼šrectangles = [[1,1,3,3],[3,1,4,2],[3,2,4,4],[1,3,2,4],[2,3,3,4]]
# //è¾“å‡ºï¼štrue
# //è§£é‡Šï¼š5 ä¸ªçŸ©å½¢ä¸€èµ·å¯ä»¥ç²¾ç¡®åœ°è¦†ç›–ä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚
# //
# //
# // ç¤ºä¾‹ 2ï¼š
# //
# //
# //è¾“å…¥ï¼šrectangles = [[1,1,2,3],[1,3,2,4],[3,1,4,2],[3,2,4,4]]
# //è¾“å‡ºï¼šfalse
# //è§£é‡Šï¼šä¸¤ä¸ªçŸ©å½¢ä¹‹é—´æœ‰é—´éš”ï¼Œæ— æ³•è¦†ç›–æˆä¸€ä¸ªçŸ©å½¢ã€‚
# //
# // ç¤ºä¾‹ 3ï¼š
# //
# //
# //è¾“å…¥ï¼šrectangles = [[1,1,3,3],[3,1,4,2],[1,3,2,4],[2,2,4,4]]
# //è¾“å‡ºï¼šfalse
# //è§£é‡Šï¼šå› ä¸ºä¸­é—´æœ‰ç›¸äº¤åŒºåŸŸï¼Œè™½ç„¶å½¢æˆäº†çŸ©å½¢ï¼Œä½†ä¸æ˜¯ç²¾ç¡®è¦†ç›–ã€‚
# //
# //
# //
# // æç¤ºï¼š
# //
# //
# // 1 <= rectangles.length <= 2 * 10â´
# // rectangles[i].length == 4
# // -10âµ <= xi, yi, ai, bi <= 10âµ
# //
# //
# // Related Topics æ•°ç»„ æ‰«æçº¿ ğŸ‘ 229 ğŸ‘ 0

class Solution:
    # ä»é¢ç§¯å’Œé¡¶ç‚¹ä¸¤ä¸ªè§’åº¦è€ƒè™‘
    # ä»é¡¶ç‚¹çš„è§’åº¦çœ‹ï¼Œå½“æŸä¸€ä¸ªç‚¹åŒæ—¶æ—¶2ä¸ªæˆ–è€…4ä¸ªå°çŸ©å½¢çš„é¡¶ç‚¹æ—¶ï¼Œè¯¥ç‚¹æœ€ç»ˆä¸æ˜¯é¡¶ç‚¹ï¼›å½“æŸä¸€ä¸ªç‚¹åŒæ—¶æ—¶1ä¸ªæˆ–è€…3ä¸ªå°çŸ©å½¢çš„é¡¶ç‚¹æ—¶ï¼Œè¯¥ç‚¹æœ€ç»ˆæ—¶ä¸€ä¸ªé¡¶ç‚¹ã€‚
    # points é›†åˆä¸­æœ€ååº”è¯¥åªæœ‰ 4 ä¸ªé¡¶ç‚¹å¯¹å§ï¼Œå¦‚æœ len(points) != 4 è¯´æ˜æœ€ç»ˆæ„æˆçš„å›¾å½¢è‚¯å®šä¸æ˜¯å®Œç¾çŸ©å½¢
    # ä½†æ˜¯å¦‚æœ len(points) == 4 æ˜¯å¦èƒ½è¯´æ˜æœ€ç»ˆæ„æˆçš„å›¾å½¢è‚¯å®šæ˜¯å®Œç¾çŸ©å½¢å‘¢ï¼Ÿä¹Ÿä¸è¡Œï¼Œå› ä¸ºé¢˜ç›®å¹¶æ²¡æœ‰è¯´ rectangles ä¸­çš„å°çŸ©å½¢ä¸å­˜åœ¨é‡å¤
    def isRectangleCover(self, rectangles: List[List[int]]) -> bool:
        X1, Y1 = float('inf'), float('inf')
        X2, Y2 = -float('inf'), -float('inf')
        # è®°å½•æ‰€æœ‰çŸ©å½¢çš„é¢ç§¯ä¹‹å’Œ
        actual_area = 0
        # å“ˆå¸Œé›†åˆï¼Œè®°å½•æœ€ç»ˆå›¾å½¢çš„é¡¶ç‚¹
        points = set()
        for x1, y1, x2, y2 in rectangles:
            # è®¡ç®—å®Œç¾çŸ©å½¢çš„ç†è®ºåæ ‡
            X1, Y1 = min(x1, X1), min(y1, Y1)
            X2, Y2 = max(x2, X2), max(y2, Y2)
            # ç´¯åŠ æ‰€æœ‰å°çŸ©å½¢çš„é¢ç§¯
            actual_area += (x2 - x1) * (y2 - y1)
            # å…ˆè®¡ç®—å‡ºå°çŸ©å½¢æ¯ä¸ªç‚¹çš„åæ ‡
            p1, p2 = (x1, y1), (x1, y2)
            p3, p4 = (x2, y1), (x2, y2)
            # å¯¹äºæ¯ä¸ªç‚¹ï¼Œå¦‚æœå­˜åœ¨é›†åˆä¸­ï¼Œåˆ é™¤å®ƒ
            # å¦‚æœä¸å­˜åœ¨é›†åˆä¸­ï¼Œæ·»åŠ å®ƒ
            # åœ¨é›†åˆä¸­å‰©ä¸‹çš„ç‚¹éƒ½æ˜¯å‡ºç°å¥‡æ¬¡çš„ç‚¹
            for p in [p1, p2, p3, p4]:
                if p in points:
                    points.remove(p)
                else:
                    points.add(p)
        # è®¡ç®—å®Œç¾çŸ©å½¢çš„ç†è®ºé¢ç§¯
        expect_area = (X2 - X1) * (Y2 - Y1)
        # é¢ç§¯åº”è¯¥ç›¸ç­‰
        if expect_area != actual_area:
            return False

        # åˆ¤æ–­æœ€ç»ˆç•™ä¸‹çš„é¡¶ç‚¹ä¸ªæ•°æ˜¯å¦ä¸º4
        if len(points) is not 4:
            return False
        # åˆ¤æ–­ç•™ä¸‹çš„ 4 ä¸ªé¡¶ç‚¹æ˜¯å¦æ˜¯å®Œç¾çŸ©å½¢çš„é¡¶ç‚¹
        if (X1, Y1) not in points \
                or (X1, Y2) not in points \
                or (X2, Y1) not in points \
                or (X2, Y2) not in points:
            return False

        return True