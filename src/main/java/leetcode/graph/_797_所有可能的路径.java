package leetcode.graph;

import java.util.LinkedList;
import java.util.List;

//ç»™ä½ ä¸€ä¸ªæœ‰ n ä¸ªèŠ‚ç‚¹çš„ æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œè¯·ä½ æ‰¾å‡ºæ‰€æœ‰ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ n-1 çš„è·¯å¾„å¹¶è¾“å‡ºï¼ˆä¸è¦æ±‚æŒ‰ç‰¹å®šé¡ºåºï¼‰
//
// graph[i] æ˜¯ä¸€ä¸ªä»èŠ‚ç‚¹ i å¯ä»¥è®¿é—®çš„æ‰€æœ‰èŠ‚ç‚¹çš„åˆ—è¡¨ï¼ˆå³ä»èŠ‚ç‚¹ i åˆ°èŠ‚ç‚¹ graph[i][j]å­˜åœ¨ä¸€æ¡æœ‰å‘è¾¹ï¼‰ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//
//
//è¾“å…¥ï¼šgraph = [[1,2],[3],[3],[]]
//è¾“å‡ºï¼š[[0,1,3],[0,2,3]]
//è§£é‡Šï¼šæœ‰ä¸¤æ¡è·¯å¾„ 0 -> 1 -> 3 å’Œ 0 -> 2 -> 3
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//
//
//è¾“å…¥ï¼šgraph = [[4,3,1],[3,2,4],[3],[4],[]]
//è¾“å‡ºï¼š[[0,4],[0,3,4],[0,1,3,4],[0,1,2,3,4],[0,1,4]]
//
//
//
//
// æç¤ºï¼š
//
//
// n == graph.length
// 2 <= n <= 15
// 0 <= graph[i][j] < n
// graph[i][j] != iï¼ˆå³ä¸å­˜åœ¨è‡ªç¯ï¼‰
// graph[i] ä¸­çš„æ‰€æœ‰å…ƒç´  äº’ä¸ç›¸åŒ
// ä¿è¯è¾“å…¥ä¸º æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰
//
//
//
// Related Topics æ·±åº¦ä¼˜å…ˆæœç´¢ å¹¿åº¦ä¼˜å…ˆæœç´¢ å›¾ å›æº¯ ğŸ‘ 305 ğŸ‘ 0
public class _797_æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ {
    class Solution {
        List<List<Integer>> res = new LinkedList<>();
        //å› ä¸ºæ˜¯æœ‰å‘æ— ç¯å›¾ï¼Œæ‰€ä»¥ä¸ç”¨vistedæ¥è®°å½•å›è·¯
        public List<List<Integer>> allPathsSourceTarget(int[][] graph) {
            //ç»´æŠ¤é€’å½’è¿‡ç¨‹ä¸­ç»è¿‡çš„è·¯å¾„
            LinkedList<Integer> path = new LinkedList<>();
            traverse(graph, 0, path);
            return res;
        }

        public void traverse(int [][] graph, int s, LinkedList<Integer> path) {
            //æ·»åŠ såˆ°è·¯å¾„
            path.addLast(s);
            int n = graph.length;
            if (s == n-1) {
                //åˆ°è¾¾ç»ˆç‚¹
                res.add(new LinkedList<>(path));
                // å¯ä»¥åœ¨è¿™é‡Œç›´æ¥return,ä½†è¦removeLast ï¼Œæ­£ç¡®ç»´æŠ¤path
                // path.removeLast();
                // return;
                // ä¸return ä¹Ÿå¯ä»¥ï¼Œå› ä¸ºå›¾ä¸­ä¸å«ç¯ï¼Œä¸ä¼šå‡ºç°æ— é™é€’å½’
            }

            //é€’å½’éå†æ¯ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹
            for (int v:graph[s]) {
                traverse(graph, v, path);
            }

            //ä»è·¯å¾„ä¸­ç§»é™¤èŠ‚ç‚¹s
            path.removeLast();

        }

        //æ€»ç»“ä¸€ä¸‹
        // å›¾çš„å­˜å‚¨æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼Œé‚»æ¥è¡¨å’Œé‚»æ¥çŸ©é˜µ
        // åœ¨é¢è¯•ä¸­æœ€å¸¸è€ƒçš„ç®—æ³•æ˜¯å›¾çš„éå†ï¼Œå’Œå¤šå‰æ ‘çš„éå†æ˜¯ç±»ä¼¼çš„
    }
}
