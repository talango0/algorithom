package leetcode.arrays;
//n ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ ratings è¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚
//
//ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š
//
//æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚
//ç›¸é‚»ä¸¤ä¸ªå­©å­è¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚
//è¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„ æœ€å°‘ç³–æœæ•°ç›® ã€‚
//
//ç¤ºä¾‹ 1ï¼š
//
//è¾“å…¥ï¼šratings = [1,0,2]
//è¾“å‡ºï¼š5
//è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚
//ç¤ºä¾‹ 2ï¼š
//
//è¾“å…¥ï¼šratings = [1,2,2]
//è¾“å‡ºï¼š4
//è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚
//     ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™æ»¡è¶³é¢˜é¢ä¸­çš„ä¸¤ä¸ªæ¡ä»¶ã€‚
//æç¤ºï¼š
//
//n == ratings.length
//1 <= n <= 2 * 104
//0 <= ratings[i] <= 2 * 104
//Related Topics
//
//ğŸ‘ 977, ğŸ‘ 0
/**
 * @author mayanwei
 * @date 2022-08-31.
 */
public class _135_åˆ†å‘ç³–æœ{
    //æ€è·¯åŠè§£æ³•ï¼šä¸¤æ¬¡éå†
    //æˆ‘ä»¬å¯ä»¥å°†ã€Œç›¸é‚»çš„å­©å­ä¸­ï¼Œè¯„åˆ†é«˜çš„å­©å­å¿…é¡»è·å¾—æ›´å¤šçš„ç³–æœã€è¿™å¥è¯æ‹†åˆ†ä¸ºä¸¤ä¸ªè§„åˆ™ï¼Œåˆ†åˆ«å¤„ç†ã€‚
    //å·¦è§„åˆ™ï¼šå½“ ratings[iâˆ’1]<ratings[i] æ—¶ï¼Œiå·å­¦ç”Ÿçš„ç³–æœæ•°é‡å°†æ¯” iâˆ’1 å·å­©å­çš„ç³–æœæ•°é‡å¤šã€‚
    //å³è§„åˆ™ï¼šå½“ ratings[i]>ratings[i+1] æ—¶ï¼Œi å·å­¦ç”Ÿçš„ç³–æœæ•°é‡å°†æ¯” i+1 å·å­©å­çš„ç³–æœæ•°é‡å¤šã€‚
    //æˆ‘ä»¬éå†è¯¥æ•°ç»„ä¸¤æ¬¡ï¼Œå¤„ç†å‡ºæ¯ä¸€ä¸ªå­¦ç”Ÿåˆ†åˆ«æ»¡è¶³å·¦è§„åˆ™æˆ–å³è§„åˆ™æ—¶ï¼Œæœ€å°‘éœ€è¦è¢«åˆ†å¾—çš„ç³–æœæ•°é‡ã€‚æ¯ä¸ªäººæœ€ç»ˆåˆ†å¾—çš„ç³–æœæ•°é‡å³ä¸ºè¿™ä¸¤ä¸ªæ•°é‡çš„æœ€å¤§å€¼ã€‚

    class Solution {
        public int candy(int[] ratings) {
            int n = ratings.length;
            int[] left = new int[n];
            for (int i = 0; i < n; i++) {
                if (i > 0 && ratings[i] > ratings[i - 1]) {
                    left[i] = left[i - 1] + 1;
                } else {
                    left[i] = 1;
                }
            }
            int right = 0, ret = 0;
            for (int i = n - 1; i >= 0; i--) {
                if (i < n - 1 && ratings[i] > ratings[i + 1]) {
                    right++;
                } else {
                    right = 1;
                }
                ret += Math.max(left[i], right);
            }
            return ret;
        }
    }

    class Solution2 {
        public int candy(int[] ratings) {
            int n = ratings.length;
            int ret = 1;
            int inc = 1, dec = 0, pre = 1;
            for (int i = 1; i < n; i++) {
                if (ratings[i] >= ratings[i - 1]) {
                    dec = 0;
                    pre = ratings[i] == ratings[i - 1] ? 1 : pre + 1;
                    ret += pre;
                    inc = pre;
                } else {
                    dec++;
                    if (dec == inc) {
                        dec++;
                    }
                    ret += dec;
                    pre = 1;
                }
            }
            return ret;
        }
    }
}
