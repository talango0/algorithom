package leetcode.dp;

//
//
// ä¸€äº›æ¶é­”æŠ“ä½äº†å…¬ä¸»ï¼ˆPï¼‰å¹¶å°†å¥¹å…³åœ¨äº†åœ°ä¸‹åŸçš„å³ä¸‹è§’ã€‚åœ°ä¸‹åŸæ˜¯ç”± M x N ä¸ªæˆ¿é—´ç»„æˆçš„äºŒç»´ç½‘æ ¼ã€‚æˆ‘ä»¬è‹±å‹‡çš„éª‘å£«ï¼ˆKï¼‰æœ€åˆè¢«å®‰ç½®åœ¨å·¦ä¸Šè§’çš„æˆ¿é—´é‡Œï¼Œä»–å¿…é¡»ç©¿
//è¿‡åœ°ä¸‹åŸå¹¶é€šè¿‡å¯¹æŠ—æ¶é­”æ¥æ‹¯æ•‘å…¬ä¸»ã€‚
//
// éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°ä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æœä»–çš„å¥åº·ç‚¹æ•°åœ¨æŸä¸€æ—¶åˆ»é™è‡³ 0 æˆ–ä»¥ä¸‹ï¼Œä»–ä¼šç«‹å³æ­»äº¡ã€‚
//
// æœ‰äº›æˆ¿é—´ç”±æ¶é­”å®ˆå«ï¼Œå› æ­¤éª‘å£«åœ¨è¿›å…¥è¿™äº›æˆ¿é—´æ—¶ä¼šå¤±å»å¥åº·ç‚¹æ•°ï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†æŸå¤±å¥åº·ç‚¹æ•°ï¼‰ï¼›å…¶ä»–æˆ¿é—´è¦ä¹ˆæ˜¯ç©ºçš„ï¼ˆæˆ¿é—´é‡Œçš„å€¼ä¸º 0ï¼‰ï¼Œè¦ä¹ˆ
//åŒ…å«å¢åŠ éª‘å£«å¥åº·ç‚¹æ•°çš„é­”æ³•çƒï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºæ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†å¢åŠ å¥åº·ç‚¹æ•°ï¼‰ã€‚
//
// ä¸ºäº†å°½å¿«åˆ°è¾¾å…¬ä¸»ï¼Œéª‘å£«å†³å®šæ¯æ¬¡åªå‘å³æˆ–å‘ä¸‹ç§»åŠ¨ä¸€æ­¥ã€‚
//
// ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç¡®ä¿éª‘å£«èƒ½å¤Ÿæ‹¯æ•‘åˆ°å…¬ä¸»æ‰€éœ€çš„æœ€ä½åˆå§‹å¥åº·ç‚¹æ•°ã€‚
//
// ä¾‹å¦‚ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹å¸ƒå±€çš„åœ°ä¸‹åŸï¼Œå¦‚æœéª‘å£«éµå¾ªæœ€ä½³è·¯å¾„ å³ -> å³ -> ä¸‹ -> ä¸‹ï¼Œåˆ™éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°è‡³å°‘ä¸º 7ã€‚
//
//
//
// -2 (K) -3  3
// -5    -10  1
// 10     30  -5 (P)
//
// è¯´æ˜:
//
// éª‘å£«çš„å¥åº·ç‚¹æ•°æ²¡æœ‰ä¸Šé™ã€‚
// ä»»ä½•æˆ¿é—´éƒ½å¯èƒ½å¯¹éª‘å£«çš„å¥åº·ç‚¹æ•°é€ æˆå¨èƒï¼Œä¹Ÿå¯èƒ½å¢åŠ éª‘å£«çš„å¥åº·ç‚¹æ•°ï¼ŒåŒ…æ‹¬éª‘å£«è¿›å…¥çš„å·¦ä¸Šè§’æˆ¿é—´ä»¥åŠå…¬ä¸»è¢«ç›‘ç¦çš„å³ä¸‹è§’æˆ¿é—´ã€‚
// Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ ğŸ‘ 643 ğŸ‘ 0

import java.util.Arrays;

/**
 * å­—èŠ‚
 *
 * @author mayanwei
 * @date 2022-07-25.
 */
public class _174_åœ°ä¸‹åŸæ¸¸æˆ{
    class Solution{
        // å®šä¹‰: ä»grid[i][j] åˆ°è¾¾ç»ˆç‚¹ï¼ˆå³ä¸‹è§’ï¼‰æ‰€éœ€çš„æœ€å°‘ç”Ÿå‘½å€¼æ˜¯ dp(grid, i, j)
        // int res = min(dp(i+1, j), dp(i, j+1)) - grid[i][j];
        // dp[i][j] = res <= 0 ? 1:res
        public int calculateMinimumHP(int[][] dungeon) {
            if (dungeon == null) {
                return -1;
            }
            int m = dungeon.length;
            int n = dungeon[0].length;
            // å¤‡å¿˜å½•ä¸­éƒ½åˆå§‹åŒ–ä¸º-1
            memo = new int[m][n];
            for (int[] row : memo) {
                Arrays.fill(row, -1);
            }
            return dp(dungeon, 0, 0);

        }

        //å¤‡å¿˜å½•ï¼Œæ¶ˆé™¤é‡å å­é—®é¢˜
        private int[][] memo;

        private int dp(int[][] grid, int i, int j) {
            int m = grid.length;
            int n = grid[0].length;
            // base case
            if (i == m - 1 && j == n - 1) {
                return grid[i][j] >= 0 ? 1 :-grid[i][j] + 1;
            }
            if (i == m || j == n) {
                return Integer.MAX_VALUE;
            }
            // é¿å…é‡å¤è®¡ç®—
            if (memo[i][j] != -1) {
                return memo[i][j];
            }
            // çŠ¶æ€è½¬ç§»æ–¹ç¨‹
            int res = Math.min(
                    dp(grid, i + 1, j),
                    dp(grid, i, j + 1)
            ) - grid[i][j];
            memo[i][j] = res <= 0 ? 1 :res;
            return memo[i][j];
        }
    }
}
