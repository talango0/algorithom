package leetcode.dp;
//ç»™ä½  k æšç›¸åŒçš„é¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä»ç¬¬ 1 å±‚åˆ°ç¬¬ n å±‚å…±æœ‰ n å±‚æ¥¼çš„å»ºç­‘ã€‚
// å·²çŸ¥å­˜åœ¨æ¥¼å±‚ f ï¼Œæ»¡è¶³ 0 <= f <= n ï¼Œä»»ä½•ä» é«˜äº f çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œ
// ä» f æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚
// æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å–ä¸€æšæ²¡æœ‰ç¢çš„é¸¡è›‹å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ x æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= x <= nï¼‰ã€‚
// å¦‚æœé¸¡è›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æ¬¡ä½¿ç”¨å®ƒã€‚å¦‚æœæŸæšé¸¡è›‹æ‰”ä¸‹åæ²¡æœ‰æ‘”ç¢ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åçš„æ“ä½œä¸­
// é‡å¤ä½¿ç”¨ è¿™æšé¸¡è›‹ã€‚
//
// è¯·ä½ è®¡ç®—å¹¶è¿”å›è¦ç¡®å®š f ç¡®åˆ‡çš„å€¼çš„ æœ€å°æ“ä½œæ¬¡æ•° æ˜¯å¤šå°‘ï¼Ÿ
//
// ç¤ºä¾‹ 1ï¼š
//è¾“å…¥ï¼šk = 1, n = 2
//è¾“å‡ºï¼š2
//è§£é‡Šï¼š
//é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 0 ã€‚
//å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 1 ã€‚
//å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¾—å‡º f = 2 ã€‚
//å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š f æ˜¯å¤šå°‘ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//è¾“å…¥ï¼šk = 2, n = 6
//è¾“å‡ºï¼š3
//
//
// ç¤ºä¾‹ 3ï¼š
//è¾“å…¥ï¼šk = 3, n = 14
//è¾“å‡ºï¼š4
//
// æç¤ºï¼š
//
//
// 1 <= k <= 100
// 1 <= n <= 10â´
//
//
// Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ ğŸ‘ 852 ğŸ‘ 0

import java.util.Arrays;

/**
 * å­—èŠ‚
 * @author mayanwei
 * @date 2022-07-30.
 */
public class _887_é¸¡è›‹æ‰è½{
    class Solution1{

        // æ€è·¯ï¼Œè¿™ä¸ªé—®é¢˜æœ‰ä»€ä¹ˆçŠ¶æ€ï¼Œæœ‰ä»€ä¹ˆé€‰æ‹©ï¼Œç„¶åç©·ä¸¾
        // çŠ¶æ€ ï¼šå°±æ˜¯å½“å‰æ‹¥æœ‰çš„é¸¡è›‹æ•° K å’Œéœ€è¦æµ‹è¯•çš„æ¥¼å±‚æ•° Nã€‚ éšç€æµ‹è¯•çš„è¿›è¡Œé¸¡è›‹æ•°ä¼šå‡å°‘ï¼Œæ¥¼å±‚çš„æœç´¢èŒƒå›´ä¼šå‡å°‘ï¼Œè¿™å°±æ˜¯çŠ¶æ€çš„å˜åŒ–
        // é€‰æ‹© ï¼šå…¶å®å°±æ˜¯å»é€‰æ‹©å“ªå±‚æ¥¼æ‰”é¸¡è›‹
        // æœ‰äº†è¿™ä¸ªæ€è·¯ï¼ŒåŠ¨æ€è§„åˆ’çš„åŸºæœ¬æ€è·¯å°±å½¢æˆäº†
        // è‚¯å®šæ˜¯äºŒç»´ dp æ•°ç»„æˆ–è€…å¸¦æœ‰ä¸¤ä¸ªçŠ¶æ€å‚æ•°çš„ dp å‡½æ•°æ¥è¡¨ç¤ºçŠ¶æ€è½¬ç§»ï¼›å¤–åŠ ä¸€ä¸ªforå¾ªç¯éå†æ‰€æœ‰çš„é€‰æ‹©ï¼Œæ‹©æœ€ä¼˜çš„é€‰æ‹©æ›´æ–°çŠ¶æ€ã€‚
        // å½“å‰çŠ¶æ€ä¸º k ä¸ªé¸¡è›‹,n ä¸ªæ¥¼å±‚ï¼Œè¿”å›è¿™ä¸ªçŠ¶æ€ä¸‹çš„æœ€ä¼˜ç»“æœ
        // int dp(int k, int n) {
        //     int res;
        //     for (int i = 1; i<=n; i++) {
        //         res = Math.min(res, è¿™æ¬¡åœ¨ç¬¬iå±‚æ‰”é¸¡è›‹);
        //     }
        //     res;
        // }

        int[][] dp;

        public int superEggDrop(int k, int n) {
            dp = new int[k + 1][n + 1];
            for (int i = 0; i <= k; i++) {
                Arrays.fill(dp[i], Integer.MAX_VALUE);

            }
            return dp(k, n);
        }

        /**
         * æœ€åçš„æƒ…å†µä¸‹éœ€è¦æ˜¯å¤šå°‘æ¬¡å°±ä¸€å®šèƒ½å¤Ÿæ‰¾å‡ºæ¥å“ªä¸ªæ¥¼å±‚
         * @param k é¸¡è›‹ä¸ªæ•°
         * @param n æ¥¼å±‚é«˜åº¦
         * @return
         */
        private int dp(int k, int n) {
            if (dp[k][n] != Integer.MAX_VALUE) {
                return dp[k][n];
            }
            // base case
            if (k == 1) {
                // æœ€åæƒ…å†µï¼Œé€å±‚è¯•æ‰èƒ½è¯•å‡ºæ¥
                return n;
            }
            if (n == 0) {
                return 0;
            }
            int res = Integer.MAX_VALUE;
            // for (int i = 1; i<=n; i++) {
            //     res = Math.min(res, Math.max(
            //             dp(k-1, i-1),
            //             dp(k, n-i))
            //              + 1
            //      );
            // }
            // ç”¨äºŒåˆ†æœç´¢ä»£æ›¿çº¿ä¸‹æœç´¢
            int lo = 1, hi = n;
            while (lo <= hi) {
                int mid = lo + ((hi - lo) >> 1);
                int broken = dp(k - 1, mid - 1);
                int not_broken = dp(k, n - mid);
                // res = max(max(ç¢ï¼Œ æ²¡ç¢)+1)
                if (broken > not_broken) {
                    hi = mid - 1;
                    res = Math.min(res, broken + 1);
                }
                else {
                    lo = mid + 1;
                    res = Math.min(res, not_broken + 1);
                }
            }
            dp[k][n] = res;
            return res;
        }
    }


    class Solution2{

        /**
         * <pre>
         * æ€è·¯, é‡æ–°å®šä¹‰dpçš„å«ä¹‰
         * dp[k][m] = n
         * å½“å‰æœ‰ k ä¸ªé¸¡è›‹ï¼Œå¯ä»¥å°è¯•æ‰” m æ¬¡é¸¡è›‹
         * è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œæœ€åçš„æƒ…å†µä¸‹æœ€å¤šèƒ½ç¡®åˆ‡æµ‹è¯•ä¸€æ ‹ n å±‚çš„æ¥¼
         * æ¯”å¦‚ï¼Œdp[1][7] = 7 è¡¨ç¤ºï¼Œ
         * ç°åœ¨æœ‰ä¸€ä¸ªé¸¡è›‹ï¼Œå…è®¸ä½ æ‰” 7  æ¬¡ï¼Œè¿™ä¸ªçŠ¶æ€ä¸‹æœ€å¤šç»™ä½  7 å±‚æ¥¼ï¼Œä½¿å¾—ä½ å¯ä»¥ç¡®å®šæ¥¼å±‚ Fä½¿å¾—é¸¡è›‹æ°å¥½æ‘”ä¸ç¢
         * ï¼ˆä¸€å±‚ä¸€å±‚çº¿æ€§æ¢æµ‹ï¼‰
         * </pre>
         * @param k
         * @param n
         * @return
         */

        public int superEggDrop(int k, int n) {
            // m æœ€å¤šä¸ä¼šè¶…è¿‡ n æ¬¡ï¼ˆçº¿ä¸‹æ¢æµ‹ï¼‰
            int[][] dp = new int[k + 1][n + 1];
            // base case, java é»˜è®¤åˆå§‹æ•°ç»„å€¼ä¸º0
            // dp[0][...] = 0;
            // dp[...][0] = 0;
            int m = 0;
            while (dp[k][m] < n) {
                m++;
                for (int i = 1; i <= k; i++) {
                    dp[i][m] = dp[i][m - 1] + dp[i - 1][m - 1] + 1;
                }
            }
            return m;
        }

    }

    class Solution3 {

        public int superEggDrop(int K, int N) {
            int remainTestCount = 1;//ç©·ä¸¾ç§»åŠ¨æ¬¡æ•°ï¼ˆæµ‹è¯•çš„æ¬¡æ•°ï¼‰
            while (getConfirmFloors(remainTestCount, K) < N){
                ++remainTestCount;
            }
            return remainTestCount;
        }

        //åœ¨remainTestCountä¸ªæµ‹è¯•æœºä¼šï¼ˆæ‰”é¸¡è›‹çš„æœºä¼š æˆ–è€…ç§»åŠ¨çš„æ¬¡æ•°ï¼‰ï¼Œ
        // eggsCountä¸ªé¸¡è›‹å¯ä»¥ç¡®å®šçš„æ¥¼å±‚æ•°é‡
        public int getConfirmFloors(int remainTestCount, int eggsCount){
            if (remainTestCount == 1 || eggsCount == 1){
                //å¦‚æœremainTestCount == 1ä½ åªèƒ½ç§»åŠ¨ä¸€æ¬¡ï¼Œåˆ™ä½ åªèƒ½ç¡®å®šç¬¬ä¸€æ¥¼æ˜¯å¦ï¼Œ
                // ä¹Ÿå°±æ˜¯è¯´é¸¡è›‹åªèƒ½æ”¾åœ¨ç¬¬ä¸€æ¥¼ï¼Œå¦‚æœç¢äº†ï¼Œåˆ™F == 0ï¼Œå¦‚æœé¸¡è›‹æ²¡ç¢ï¼Œåˆ™F == 1
                //å¦‚æœeggsCount == 1é¸¡è›‹æ•°ä¸º1ï¼Œå®ƒç¢äº†ä½ å°±æ²¡æœ‰é¸¡è›‹äº†ï¼Œä¸ºäº†ä¿é™©ï¼Œ
                // ä½ åªèƒ½ä»ç¬¬ä¸€æ¥¼å¼€å§‹é€æ¸å¾€ä¸Šæµ‹è¯•ï¼Œå¦‚æœç¬¬ä¸€æ¥¼ç¢äº†ï¼ˆåŒä¸Šï¼‰ï¼Œ
                // ç¬¬ä¸€æ¥¼æ²¡ç¢ç»§ç»­æµ‹ç¬¬iæ¥¼ï¼Œè›‹å¼ä½ ä¸å¯èƒ½æ— é™åˆ¶çš„æµ‹è¯•ï¼Œå› ä¸ºä½ åªèƒ½æµ‹è¯•remainTestCountæ¬¡
                return remainTestCount;
            }
            return getConfirmFloors(remainTestCount - 1, eggsCount - 1)
                    + 1
                    + getConfirmFloors(remainTestCount - 1, eggsCount);
        }
    }
}
